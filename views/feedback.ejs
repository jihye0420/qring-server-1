<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="/stylesheets/style.css" />
  <meta charset="utf-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <!-- 합쳐지고 최소화된 최신 CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
  <!-- 부가적인 테마 -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css" />
  <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
</head>

<body>
  <div id="wrap">
    <form class="formform" action="/qrcode/feedback/5f02cde923aa7292ac990ce6" method="POST" autocomplete="off">
      <div style="text-align: center; margin-top: 32px;">
        <img src="https://qring.s3.ap-northeast-2.amazonaws.com/qring-banner.png" width="88px;" />
      </div>
      <div class="hrhr" style="
            margin-top: 32px;
            background-color: rgb(184, 184, 184);
            height: 1px;
            border: none;
          "></div>
      <div class="title_wrap">
        <div class="title_bold" style="
              margin-top: 40px;
              color: #36383b;
              font-weight: bolder;
              font-size: 22px;
              letter-spacing: -0.48px;
              font-family: NotoSansCJKkr;
            ">
          <%=result.name%>
        </div>
        <div class="title_check">
          더 나은 모임을 위해<br>
          아래 피드백을 작성해주세요.
        </div>
      </div>

      <% result.feedBack.forEach(n =>{ %> <% if(n.form == 0){ %>
      <div class="form-input">
        <div class="wrap_bold" style="margin-top: 20px;"><%= n.title %></div>
        <div class="wrap_sub" style="margin-top: 5px;"><%= n.content %></div>
        <textarea class="form_textarea" placeholder="자유롭게 적어주세요 :)" rows="3" name="name">adw</textarea>
      </div>
      <% } else if(n.form == 1){ %>
      <div class="wrap_bold" style="margin-top: 20px;"><%= n.title %></div>
      <div class="wrap_sub" style="margin-top: 5px;"><%= n.content %></div>
      <div class="radio_wrap" style="text-align: left;">
        <% n.choice.forEach(t=>{ %>
        <label class="container"><%= t %>
          <input type="radio" value="true" name="oversea" />
          <span class="checkmark"></span> </label><br />
        <% }) %>
      </div>
      <% } else if(n.form == 2){ %>
      <div class="wrap_bold" style="margin-top: 20px;"><%= n.title %></div>
      <div class="wrap_sub" style="margin-top: 5px;"><%= n.content %></div>
      <div class="starRev">
        <span class="starR1">별1_왼쪽</span>
        <span class="starR2">별1_오른쪽</span>
        <span class="starR1">별2_왼쪽</span>
        <span class="starR2">별2_오른쪽</span>
        <span class="starR1">별3_왼쪽</span>
        <span class="starR2">별3_오른쪽</span>
        <span class="starR1">별4_왼쪽</span>
        <span class="starR2">별4_오른쪽</span>
        <span class="starR1">별5_왼쪽</span>
        <span class="starR2">별5_오른쪽</span>
      </div><br>
      <% } %> <% }) %>


      <button class="wrap_button" style="font-weight: bolder;" type="submit">
        제출
      </button>
    </form>
  </div>
  <script>
    $(document).on("keyup", ".input_phone", function () {
      $(this).val(
        $(this)
        .val()
        .replace(/[^0-9]/g, "")
        .replace(
          /(^02|^0505|^1[0-9]{3}|^0[0-9]{2})([0-9]+)?([0-9]{4})/,
          "$1-$2-$3"
        )
        .replace("--", "-")
      );
    });

    $('.starRev span').click(function () {
      $(this).parent().children('span').removeClass('on');
      $(this).addClass('on').prevAll('span').addClass('on');
      return false;
    });

    $(document).ready(function () {
      $(".formform").submit(function (e) {
        //stop submitting the form to see the disabled button effect
        $(".wrap_button").html(
          "<img style='width:30px;' src='/images/loading.gif'>"
        );
        $(".wrap_button").attr("disabled", true);
        localStorage.setItem("name", $(".input_name").val());
        localStorage.setItem("phone", $(".input_phone").val());
        localStorage.setItem("address", $(".input_address").val());
        localStorage.setItem("part", $(':radio[name="part"]:checked').val());
        return true;
      });
    });

    if (
      localStorage.getItem("name") ||
      localStorage.getItem("phone") ||
      localStorage.getItem("address") ||
      localStorage.getItem("part")
    ) {
      $(".input_name").val(localStorage.getItem("name"));
      $(".input_phone").val(localStorage.getItem("phone"));
      $(".input_address").val(localStorage.getItem("address"));

      var part = localStorage.getItem("part");

      if (part == "plan") {
        $("input:radio[name='part']:radio[value='plan']").prop(
          "checked",
          true
        ); // 선택하기
      } else if (part == "design") {
        $("input:radio[name='part']:radio[value='design']").prop(
          "checked",
          true
        ); // 선택하기
      } else if (part == "android") {
        $("input:radio[name='part']:radio[value='android']").prop(
          "checked",
          true
        ); // 선택하기
      } else if (part == "iOS") {
        $("input:radio[name='part']:radio[value='iOS']").prop(
          "checked",
          true
        ); // 선택하기
      } else if (part == "server") {
        $("input:radio[name='part']:radio[value='server']").prop(
          "checked",
          true
        ); // 선택하기
      }
    }
  </script>
</body>

</html>