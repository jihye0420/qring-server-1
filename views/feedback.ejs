<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="/stylesheets/style.css" />
  <meta charset="utf-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <!-- 합쳐지고 최소화된 최신 CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
  <!-- 부가적인 테마 -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css" />
  <!-- 합쳐지고 최소화된 최신 자바스크립트 -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
</head>

<body>
  <div id="wrap">
    <img src="https://qring.s3.ap-northeast-2.amazonaws.com/qring_logo.png" style="width: 80px;" />
    <form class="formform" action="/qrcode/1" method="POST" autocomplete="off">
      <% feedBack.forEach(n =>{ %>
      <% if(n.form == 0){ %>
      <div class="form-input">
        <div class="wrap_bold" style="margin-top: 20px;"><%= n.title %></div>
        <div class="wrap_sub" style="margin-top: 5px;"><%= n.content %></div>
        <label>
          <input class="input_name" name="name" required>
          <span class="placeholder"></span>
        </label>
      </div>
      <% } else if(n.form == 1){ %>
      <div class="wrap_bold" style="margin-top: 20px;"><%= n.title %></div>
      <div class="wrap_sub" style="margin-top: 5px;"><%= n.content %></div>
      <div class="radio_wrap" style="text-align:left;">
        <% n.choice.forEach(t=>{ %>
        <label class="container"><%= t %>
          <input type="radio" value="true" name="oversea">
          <span class="checkmark"></span>
        </label><br>
        <% }) %>
      </div>
      <% } else if(n.form == 2){ %>
      <div class="wrap_bold" style="margin-top: 20px;"><%= n.title %></div>
      <div class="wrap_sub" style="margin-top: 5px;"><%= n.content %></div>
      <div class="starRev">
        <span class="starR on">별1</span>
        <span class="starR">별2</span>
        <span class="starR">별3</span>
        <span class="starR">별4</span>
        <span class="starR">별5</span>
      </div>
      <% } %>
      <% }) %>
      <!-- <div class="form-input">
        <label>
          <input class="input_name" name="name" required>
          <span class="placeholder">이름</span>
        </label>
      </div>
      <div class="form-input">
        <label>
          <input class="input_phone" type="text" maxlength="13" autocomplete="off" name="phone" required>
          <span class="placeholder">전화번호</span>
        </label>
      </div> -->
      <!-- <div class="form-input">
        <label>
          <input class="input_address" name="address" required>
          <span class="placeholder">주소</span>
        </label>
      </div> -->
      <!-- <div class="wrap_bold" style="margin-top: 31px;">파트</div>
      <div class="radio_wrap" style="text-align:left;">
        <label class="container">기획
          <input type="radio" value="plan" checked="checked" name="part">
          <span class="checkmark"></span>
        </label><br>
        <label class="container">디자인
          <input type="radio" value="design" name="part">
          <span class="checkmark"></span>
        </label><br>
        <label class="container">안드
          <input type="radio" value="android" name="part">
          <span class="checkmark"></span>
        </label><br>
        <label class="container">iOS
          <input type="radio" value="iOS" name="part">
          <span class="checkmark"></span>
        </label><br>
        <label class="container">서버
          <input type="radio" value="server" name="part">
          <span class="checkmark"></span>
        </label>
      </div> -->
      <!-- <div class="wrap_bold" style="margin-top: 20px;">최근 14일내 해외여행을<br> 다녀온 적이 있나요?</div>
      <div class="radio_wrap" style="text-align:left;">
        <label class="container">예
          <input type="radio" value="true" name="oversea">
          <span class="checkmark"></span>
        </label><br>
        <label class="container">아니요
          <input type="radio" value="false" checked="checked" name="oversea">
          <span class="checkmark"></span>
        </label>
      </div> -->


      <div style="margin-top:12px;font-weight: 100;font-size:12px;color:grey;">※ 입력받은 정보는 역학조사를 할 경우에만 제공될
        예정이며,<br>수집일로부터
        2주뒤에 파기될 예정입니다.
      </div>
      <button class="wrap_button" style="font-weight: bolder;" type="submit">제출</button>
    </form>
  </div>
  </div>

  <script>
    $(document).on("keyup", ".input_phone", function () {
      $(this).val(
        $(this)
        .val()
        .replace(/[^0-9]/g, "")
        .replace(
          /(^02|^0505|^1[0-9]{3}|^0[0-9]{2})([0-9]+)?([0-9]{4})/,
          "$1-$2-$3"
        )
        .replace("--", "-")
      );
    });

    $('.starRev span').click(function () {
      $(this).parent().children('span').removeClass('on');
      $(this).addClass('on').prevAll('span').addClass('on');
      return false;
    });

    $(document).ready(function () {
      $(".formform").submit(function (e) {
        //stop submitting the form to see the disabled button effect
        $(".wrap_button").html("<img style='width:30px;' src='/images/loading.gif'>");
        $(".wrap_button").attr("disabled", true);
        localStorage.setItem('name', $('.input_name').val());
        localStorage.setItem('phone', $('.input_phone').val());
        localStorage.setItem('address', $('.input_address').val());
        localStorage.setItem('part', $(':radio[name="part"]:checked').val());
        return true;
      });
    });

    if (localStorage.getItem('name') || localStorage.getItem('phone') || localStorage.getItem('address') || localStorage
      .getItem('part')) {
      $('.input_name').val(localStorage.getItem('name'))
      $('.input_phone').val(localStorage.getItem('phone'))
      $('.input_address').val(localStorage.getItem('address'))

      var part = localStorage.getItem('part')

      if (part == "plan") {
        $("input:radio[name='part']:radio[value='plan']").prop('checked', true); // 선택하기
      } else if (part == "design") {
        $("input:radio[name='part']:radio[value='design']").prop('checked', true); // 선택하기
      } else if (part == "android") {
        $("input:radio[name='part']:radio[value='android']").prop('checked', true); // 선택하기
      } else if (part == "iOS") {
        $("input:radio[name='part']:radio[value='iOS']").prop('checked', true); // 선택하기
      } else if (part == "server") {
        $("input:radio[name='part']:radio[value='server']").prop('checked', true); // 선택하기
      }
    }
  </script>
</body>

</html>